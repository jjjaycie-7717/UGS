<!DOCTYPE html>
<html lang="zh-CN" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>邀请好友 - CreBee</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        crebee: {
                            bg: '#FAFAFA',
                            primary: '#FF6B00',
                            text: '#1F2937',
                            subtext: '#6B7280'
                        }
                    },
                    backgroundImage: {
                        'gradient-orange': 'linear-gradient(135deg, #FF8800 0%, #FF5500 100%)',
                    }
                }
            }
        }
    </script>
    <style>
        body { font-family: 'PingFang SC', system-ui, -apple-system, sans-serif; background: #FAFAFA; color: #1F2937; }
        .glass-nav { background: rgba(255, 255, 255, 0.9); backdrop-filter: blur(12px); border-bottom: 1px solid rgba(0,0,0,0.05); }
        .hero-text-gradient { background: linear-gradient(to right, #FF6B00, #FF9E00); -webkit-background-clip: text; background-clip: text; -webkit-text-fill-color: transparent; }
        .copy-success { animation: fadeInOut 2s ease-in-out; }
        @keyframes fadeInOut {
            0%, 100% { opacity: 0; transform: translateY(-10px); }
            50% { opacity: 1; transform: translateY(0); }
        }
    </style>
</head>
<body class="antialiased overflow-x-hidden">

    <!-- 导航栏 -->
    <nav class="glass-nav fixed w-full z-50 top-0">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-14">
                <div class="flex items-center gap-2.5">
                    <img src="白色logo.png" alt="CreBee Logo" class="h-8 w-auto">
                </div>
                <div class="hidden md:flex space-x-6 text-base font-medium text-crebee-subtext">
                    <a href="#" class="hover:text-crebee-primary transition">首页</a>
                    <a href="#" class="hover:text-crebee-primary transition">产品</a>
                    <a href="#" class="hover:text-crebee-primary transition">下载</a>
                    <a href="#" class="hover:text-crebee-primary transition">演示</a>
                    <a href="#" class="hover:text-crebee-primary transition">价格</a>
                    <a href="#" class="text-crebee-primary font-bold transition">邀请用户</a>
                    <a href="#" class="hover:text-crebee-primary transition">定制</a>
                    <a href="#" class="hover:text-crebee-primary transition">API</a>
                    <a href="#" class="hover:text-crebee-primary transition">帮助</a>
                </div>
                <div class="flex items-center gap-4">
                    <a href="#" class="hidden md:flex items-center gap-2 text-base font-medium text-crebee-subtext hover:text-crebee-primary transition">
                        <i class="fa-regular fa-comment-dots"></i>
                        <span>客服咨询</span>
                    </a>
                    <a href="#" class="bg-gradient-orange text-white px-5 py-2 rounded-full text-sm font-bold hover:opacity-90 transition shadow-lg shadow-orange-200 flex items-center gap-2">
                        <i class="fa-brands fa-apple"></i>
                        <span>免费试用</span>
                    </a>
                </div>
            </div>
        </div>
    </nav>

    <!-- 主要内容区域 -->
    <div class="pt-24 pb-20 min-h-screen">
        <div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8">
            
            <!-- 页面标题 -->
            <div class="text-center mb-12">
                <h1 class="text-4xl md:text-5xl font-extrabold mb-4">
                    邀请好友，<span class="hero-text-gradient">一起使用 CreBee</span>
                </h1>
                <p class="text-lg text-crebee-subtext max-w-2xl mx-auto">
                    每邀请一位好友注册并完成绑定，你和你的好友都将会获得<span class="text-crebee-primary font-bold">30天专业版会员</span>
                </p>
            </div>

            <!-- 邀请链接卡片 -->
            <div class="bg-white rounded-2xl shadow-xl border border-gray-100 p-8 mb-8">
                <div class="flex items-center justify-between mb-6">
                    <h2 class="text-2xl font-bold text-crebee-text">我的邀请链接</h2>
                </div>
                <div class="space-y-4">
                    <div class="text-sm font-medium text-gray-700">通用邀请链接</div>
                    <div class="flex flex-col md:flex-row gap-3">
                        <input 
                            type="text" 
                            id="inviteLink" 
                            value="https://crebee.com/invite?code=CREBEE2024" 
                            readonly 
                            class="flex-1 px-4 py-3 border border-gray-200 rounded-xl bg-gray-50 text-sm focus:outline-none"
                        >
                        <button 
                            onclick="copyInviteLink()"
                            class="px-6 py-3 bg-gradient-orange text-white rounded-xl font-bold hover:opacity-90 transition shadow-md flex items-center justify-center gap-2"
                        >
                            <i class="fa-solid fa-copy"></i> 一键复制
                        </button>
                    </div>
                </div>
            </div>

            <!-- 邀请统计 -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                <div class="bg-white rounded-xl shadow-lg border border-gray-100 p-6">
                    <div class="flex items-center justify-between">
                        <div>
                            <div class="text-sm text-crebee-subtext mb-1">累计邀请</div>
                            <div class="text-3xl font-bold text-crebee-text" id="totalInvites">12</div>
                        </div>
                        <div class="w-12 h-12 rounded-full bg-orange-100 flex items-center justify-center">
                            <i class="fa-solid fa-users text-orange-600 text-xl"></i>
                        </div>
                    </div>
                </div>
                <div class="bg-white rounded-xl shadow-lg border border-gray-100 p-6">
                    <div class="flex items-center justify-between">
                        <div>
                            <div class="text-sm text-crebee-subtext mb-1">成功注册</div>
                            <div class="text-3xl font-bold text-crebee-text" id="successRegisters">8</div>
                        </div>
                        <div class="w-12 h-12 rounded-full bg-green-100 flex items-center justify-center">
                            <i class="fa-solid fa-check-circle text-green-600 text-xl"></i>
                        </div>
                    </div>
                </div>
                <div class="bg-white rounded-xl shadow-lg border border-gray-100 p-6">
                    <div class="flex items-center justify-between">
                        <div>
                            <div class="text-sm text-crebee-subtext mb-1">获得奖励</div>
                            <div class="text-3xl font-bold text-crebee-text" id="totalRewards">56</div>
                            <div class="text-xs text-crebee-subtext mt-1">天高级会员</div>
                        </div>
                        <div class="w-12 h-12 rounded-full bg-purple-100 flex items-center justify-center">
                            <i class="fa-solid fa-gift text-purple-600 text-xl"></i>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 邀请记录 -->
            <div class="bg-white rounded-2xl shadow-xl border border-gray-100 p-8">
                <div class="flex items-center justify-between mb-6">
                    <h2 class="text-2xl font-bold text-crebee-text">邀请记录</h2>
                </div>
                
                <div class="overflow-x-auto">
                    <table class="w-full">
                        <thead>
                            <tr class="border-b border-gray-200">
                                <th class="text-left py-3 px-4 text-sm font-medium text-gray-600">邀请时间</th>
                                <th class="text-left py-3 px-4 text-sm font-medium text-gray-600">分享渠道</th>
                                <th class="text-left py-3 px-4 text-sm font-medium text-gray-600">被邀请人</th>
                                <th class="text-left py-3 px-4 text-sm font-medium text-gray-600">奖励</th>
                            </tr>
                        </thead>
                        <tbody id="inviteRecords">
                            <!-- 记录将通过 JavaScript 动态生成 -->
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <!-- 复制成功提示 -->
    <div id="copyToast" class="fixed top-24 left-1/2 transform -translate-x-1/2 bg-green-500 text-white px-6 py-3 rounded-lg shadow-xl z-50 hidden copy-success">
        <div class="flex items-center gap-2">
            <i class="fa-solid fa-check-circle"></i>
            <span>链接已复制到剪贴板！</span>
        </div>
    </div>

    <!-- 微信登录二维码弹窗 -->
    <div id="wechatLoginModal" class="fixed inset-0 bg-black bg-opacity-50 z-50 hidden flex items-center justify-center" onclick="if(event.target === this) closeWechatLogin()">
        <div class="bg-white rounded-2xl shadow-2xl p-8 max-w-md w-full mx-4 relative" onclick="event.stopPropagation()">
            <!-- 关闭按钮 -->
            <button onclick="closeWechatLogin()" class="absolute top-4 right-4 text-gray-400 hover:text-gray-600 transition">
                <i class="fa-solid fa-times text-xl"></i>
            </button>
            
            <!-- 标题 -->
            <div class="text-center mb-6">
                <div class="w-16 h-16 mx-auto mb-4 rounded-full bg-green-500 flex items-center justify-center text-white text-2xl">
                    <i class="fa-brands fa-weixin"></i>
                </div>
                <h3 class="text-2xl font-bold text-gray-800 mb-2">微信登录</h3>
                <p class="text-sm text-gray-500">请使用微信扫码登录后继续操作</p>
            </div>

            <!-- 二维码区域 -->
            <div class="flex flex-col items-center mb-6">
                <div id="qrCodeContainer" class="w-64 h-64 border-4 border-gray-200 rounded-lg flex items-center justify-center bg-gray-50 mb-4 relative">
                    <!-- 二维码图片占位 -->
                    <div id="qrCodeLoading" class="text-center">
                        <div class="animate-spin rounded-full h-12 w-12 border-b-2 border-green-500 mx-auto mb-3"></div>
                        <p class="text-sm text-gray-500">正在生成二维码...</p>
                    </div>
                    <canvas id="qrCodeCanvas" class="hidden"></canvas>
                    <img id="qrCodeImage" src="" alt="微信登录二维码" class="hidden w-full h-full object-contain">
                </div>
                
                <!-- 登录状态提示 -->
                <div id="loginStatus" class="text-center">
                    <p class="text-sm text-gray-600 mb-2">使用微信扫一扫</p>
                    <p class="text-xs text-gray-400">扫描上方二维码完成登录</p>
                </div>
            </div>

            <!-- 登录成功提示 -->
            <div id="loginSuccess" class="hidden text-center py-4">
                <div class="w-16 h-16 mx-auto mb-3 rounded-full bg-green-100 flex items-center justify-center">
                    <i class="fa-solid fa-check text-green-500 text-2xl"></i>
                </div>
                <p class="text-lg font-semibold text-gray-800 mb-1">登录成功！</p>
                <p class="text-sm text-gray-500">正在复制链接...</p>
            </div>

            <!-- 底部提示 -->
            <div class="text-center text-xs text-gray-400">
                <p>登录后即可复制邀请链接</p>
            </div>
        </div>
    </div>

    <script>
        const inviteLink = 'https://crebee.com/invite?code=CREBEE2024';

        // 登录状态
        let loginCheckInterval = null;
        let isLoggedIn = false;

        // 复制通用链接（先显示微信登录）
        function copyInviteLink() {
            // 如果已登录，直接复制
            if (isLoggedIn) {
                performCopy();
                return;
            }
            
            // 显示微信登录弹窗
            showWechatLogin();
        }

        // 显示微信登录弹窗
        function showWechatLogin() {
            const modal = document.getElementById('wechatLoginModal');
            const qrCodeLoading = document.getElementById('qrCodeLoading');
            const qrCodeImage = document.getElementById('qrCodeImage');
            const loginStatus = document.getElementById('loginStatus');
            const loginSuccess = document.getElementById('loginSuccess');
            
            // 重置状态
            isLoggedIn = false;
            qrCodeLoading.classList.remove('hidden');
            qrCodeImage.classList.add('hidden');
            loginStatus.classList.remove('hidden');
            loginSuccess.classList.add('hidden');
            
            // 显示弹窗
            modal.classList.remove('hidden');
            
            // 模拟生成二维码（实际应用中应该从后端获取）
            setTimeout(() => {
                // 使用一个二维码占位图（实际应该使用真实的二维码生成库或后端API）
                // 这里使用一个在线二维码生成服务作为示例
                const qrText = encodeURIComponent('https://crebee.com/wechat/login?token=' + Date.now());
                qrCodeImage.src = `https://api.qrserver.com/v1/create-qr-code/?size=256x256&data=${qrText}`;
                
                qrCodeImage.onload = () => {
                    qrCodeLoading.classList.add('hidden');
                    qrCodeImage.classList.remove('hidden');
                    // 开始检查登录状态
                    startLoginCheck();
                };
                
                qrCodeImage.onerror = () => {
                    // 如果二维码加载失败，使用备用方案
                    qrCodeLoading.innerHTML = `
                        <div class="text-center">
                            <i class="fa-brands fa-weixin text-6xl text-green-500 mb-3"></i>
                            <p class="text-sm text-gray-500">请使用微信扫描</p>
                            <p class="text-xs text-gray-400 mt-2">（演示模式：3-7秒后自动登录）</p>
                        </div>
                    `;
                    // 开始检查登录状态
                    startLoginCheck();
                };
            }, 1000);
        }

        // 关闭微信登录弹窗
        function closeWechatLogin() {
            const modal = document.getElementById('wechatLoginModal');
            modal.classList.add('hidden');
            
            // 停止检查登录状态
            if (loginCheckInterval) {
                clearInterval(loginCheckInterval);
                loginCheckInterval = null;
            }
        }

        // 开始检查登录状态（模拟）
        function startLoginCheck() {
            let checkCount = 0;
            const maxChecks = 60; // 最多检查60次（约60秒）
            const loginSuccessTime = Math.floor(Math.random() * 5) + 3; // 3-7秒后模拟登录成功
            
            loginCheckInterval = setInterval(() => {
                checkCount++;
                
                // 模拟登录成功（实际应用中应该轮询后端API检查登录状态）
                // 在随机时间（3-7秒）后模拟登录成功
                if (checkCount === loginSuccessTime) {
                    handleLoginSuccess();
                } else if (checkCount >= maxChecks) {
                    // 超时提示
                    const loginStatus = document.getElementById('loginStatus');
                    loginStatus.innerHTML = '<p class="text-sm text-red-500 mb-2">登录超时，请重试</p>';
                    setTimeout(() => {
                        closeWechatLogin();
                    }, 2000);
                } else {
                    // 更新状态提示
                    const loginStatus = document.getElementById('loginStatus');
                    if (checkCount < loginSuccessTime) {
                        loginStatus.innerHTML = `
                            <p class="text-sm text-gray-600 mb-2">等待扫码中...</p>
                            <p class="text-xs text-gray-400">请使用微信扫描二维码</p>
                        `;
                    }
                }
            }, 1000);
        }

        // 处理登录成功
        function handleLoginSuccess() {
            // 停止检查
            if (loginCheckInterval) {
                clearInterval(loginCheckInterval);
                loginCheckInterval = null;
            }
            
            // 更新状态
            isLoggedIn = true;
            
            // 显示成功提示
            const loginStatus = document.getElementById('loginStatus');
            const loginSuccess = document.getElementById('loginSuccess');
            
            loginStatus.classList.add('hidden');
            loginSuccess.classList.remove('hidden');
            
            // 延迟后执行复制并关闭弹窗
            setTimeout(() => {
                performCopy();
                closeWechatLogin();
            }, 1500);
        }

        // 执行复制操作
        function performCopy() {
            const input = document.getElementById('inviteLink');
            input.select();
            
            // 使用现代 Clipboard API
            if (navigator.clipboard && navigator.clipboard.writeText) {
                navigator.clipboard.writeText(input.value).then(() => {
                    showCopyToast();
                }).catch(() => {
                    // 降级到传统方法
                    document.execCommand('copy');
                    showCopyToast();
                });
            } else {
                // 降级到传统方法
                document.execCommand('copy');
                showCopyToast();
            }
            
            addInviteRecord('通用邀请', 'pending');
        }

        // 显示复制成功提示
        function showCopyToast() {
            const toast = document.getElementById('copyToast');
            toast.classList.remove('hidden');
            setTimeout(() => {
                toast.classList.add('hidden');
            }, 2000);
        }

        // 邀请记录数据（示例数据）
        let inviteRecords = [
            { id: 1, time: '2024-01-15 14:30', platform: '微信', invitee: '张**', status: 'success', reward: '30天' },
            { id: 2, time: '2024-01-14 10:20', platform: '微博', invitee: '李**', status: 'success', reward: '30天' },
            { id: 3, time: '2024-01-13 16:45', platform: '抖音', invitee: '王**', status: 'pending', reward: '-' },
            { id: 4, time: '2024-01-12 09:15', platform: '小红书', invitee: '赵**', status: 'success', reward: '30天' },
            { id: 5, time: '2024-01-11 11:30', platform: 'B站', invitee: '刘**', status: 'pending', reward: '-' },
            { id: 6, time: '2024-01-10 15:20', platform: '知乎', invitee: '陈**', status: 'success', reward: '30天' },
            { id: 7, time: '2024-01-09 13:10', platform: 'QQ', invitee: '杨**', status: 'success', reward: '30天' },
            { id: 8, time: '2024-01-08 08:45', platform: '微信', invitee: '周**', status: 'success', reward: '30天' }
        ];

        // 添加邀请记录
        function addInviteRecord(platform, status) {
            const now = new Date();
            const timeStr = `${now.getFullYear()}-${String(now.getMonth() + 1).padStart(2, '0')}-${String(now.getDate()).padStart(2, '0')} ${String(now.getHours()).padStart(2, '0')}:${String(now.getMinutes()).padStart(2, '0')}`;
            
            const newRecord = {
                id: inviteRecords.length + 1,
                time: timeStr,
                platform: platform,
                invitee: '待注册',
                status: status,
                reward: status === 'success' ? '30天' : '-'
            };
            
            inviteRecords.unshift(newRecord);
            renderInviteRecords();
            updateStatistics();
        }

        // 渲染邀请记录
        function renderInviteRecords() {
            const tbody = document.getElementById('inviteRecords');
            
            tbody.innerHTML = inviteRecords.map(record => `
                <tr class="border-b border-gray-100 hover:bg-gray-50 transition">
                    <td class="py-4 px-4 text-sm text-gray-700">${record.time}</td>
                    <td class="py-4 px-4 text-sm text-gray-700">${record.platform}</td>
                    <td class="py-4 px-4 text-sm text-gray-700">${record.invitee}</td>
                    <td class="py-4 px-4 text-sm text-gray-700">${record.reward}</td>
                </tr>
            `).join('');
        }

        // 更新统计数据
        function updateStatistics() {
            const total = inviteRecords.length;
            const success = inviteRecords.filter(r => r.status === 'success').length;
            const rewards = success * 30;
            
            document.getElementById('totalInvites').textContent = total;
            document.getElementById('successRegisters').textContent = success;
            document.getElementById('totalRewards').textContent = rewards;
        }

        // 初始化
        document.addEventListener('DOMContentLoaded', function() {
            renderInviteRecords();
            updateStatistics();
        });
    </script>
</body>
</html>
